<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤§ä¾¿æ¨¡æ“¬å™¨ï¼ˆPNGç‰ˆï¼‰</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        h1, h2 {
            text-align: center;
        }
        #toilet {
            width: 200px;
            height: 200px;
            background-color: #fff;
            border: 2px solid #000;
            border-radius: 50% 50% 0 0;
            position: relative;
            overflow: hidden;
        }
        #poop {
            width: 80px;
            height: 80px;
            position: absolute;
            bottom: -80px;
            left: 60px;
            transition: bottom 5s;
            object-fit: contain;
        }
        #start-btn {
            margin-top: 20px;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
        }
        #result, #achievements {
            margin-top: 20px;
            font-size: 18px;
            text-align: center;
        }
        .rarity-common { color: #000000; }
        .rarity-uncommon { color: #0000FF; }
        .rarity-rare { color: #800080; }
        .rarity-epic { color: #FFA500; }
        .rarity-legendary { color: #FFD700; }
        .achievement {
            margin: 5px 0;
            padding: 5px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        .unlocked {
            background-color: #e6ffe6;
        }
    </style>
</head>
<body>
    <h1>å¤§ä¾¿æ¨¡æ“¬å™¨ ğŸ’©</h1>
    <div id="toilet">
        <img id="poop" src="å¤§ä¾¿.png" alt="poop">
    </div>
    <button id="start-btn" onclick="startPooping()">é–‹å§‹å¤§ä¾¿ ğŸš½</button>
    <div id="result"></div>
    <h2>æˆå°± ğŸ†</h2>
    <div id="achievements"></div>

    <audio id="legendary-sound" src="å“‡ï¼Œé‡‘è‰²ä¼ è¯´_çˆ±ç»™ç½‘_aigei_com.mp3"></audio>

    <script>
        window.addEventListener('load', function() {
            const audio = document.getElementById('legendary-sound');
            audio.load();
        });

        const poopTypes = [
            { name: 'é¦™è•‰å‹', rarity: 'common', chance: 30, images: ['å¤§ä¾¿.png'] },
            { name: 'è»Ÿç¶¿ç¶¿', rarity: 'common', chance: 30, images: ['å¤§ä¾¿2.png'] },
            { name: 'ç¡¬é‚¦é‚¦', rarity: 'uncommon', chance: 20, images: ['å¤§ä¾¿3.png'] },
            { name: 'æ°´ç‹€', rarity: 'uncommon', chance: 10, images: ['å¤§ä¾¿4.png'] },
            { name: 'å…”å­ç³–', rarity: 'rare', chance: 5, images: ['å¤§ä¾¿7.png'] },
            { name: 'é‡‘å…‰é–ƒé–ƒ', rarity: 'epic', chance: 3, images: ['å¤§ä¾¿6.png'] },
            { name: 'å½©è™¹ä¾¿', rarity: 'legendary', chance: 2, images: ['å¤§ä¾¿5.png'] }
        ];

        const comments = [
            'å“‡ï¼é€™æ˜¯ä¸€æ¬¡æˆåŠŸçš„æ’ä¾¿ï¼ğŸ‘',
            'å—¯...é‚„ä¸éŒ¯ï¼Œä½†é‚„æœ‰æ”¹é€²ç©ºé–“ã€‚ğŸ¤”',
            'å¤©å•Šï¼é€™å‘³é“ç°¡ç›´æ˜¯è‡´å‘½æ­¦å™¨ï¼ğŸ¤¢',
            'é€™æ¬¡çš„æ‰‹æ„ŸçœŸæ˜¯çµ•äº†ï¼ğŸ‘Œ',
            'æˆ‘çš„å¤©ï¼Œé€™æ¬¡æ’ä¾¿å¯ä»¥è¼‰å…¥å²å†Šäº†ï¼ğŸ“š'
        ];

        const rarityText = {
            'common': 'æ™®é€š',
            'uncommon': 'ä¸å¸¸è¦‹',
            'rare': 'ç¨€æœ‰',
            'epic': 'å²è©©',
            'legendary': 'å‚³èªª'
        };

        const rarityEmoji = {
            'common': 'âšª',
            'uncommon': 'ğŸ”µ',
            'rare': 'ğŸŸ£',
            'epic': 'ğŸŸ ',
            'legendary': 'ğŸŸ¡'
        };

        const achievements = [
            { id: 'common', name: 'å¹³å‡¡å¦‚æˆ‘', emoji: 'ğŸ˜Š', description: 'ç²å¾—ä¸€æ¬¡æ™®é€šå¤§ä¾¿', unlocked: false },
            { id: 'uncommon', name: 'èˆ‡çœ¾ä¸åŒ', emoji: 'ğŸ˜', description: 'ç²å¾—ä¸€æ¬¡ä¸å¸¸è¦‹å¤§ä¾¿', unlocked: false },
            { id: 'rare', name: 'ç¨€ä¸–çå¯¶', emoji: 'ğŸ¤©', description: 'ç²å¾—ä¸€æ¬¡ç¨€æœ‰å¤§ä¾¿', unlocked: false },
            { id: 'epic', name: 'å²è©©èˆ¬çš„æ’ä¾¿', emoji: 'ğŸ¤¯', description: 'ç²å¾—ä¸€æ¬¡å²è©©å¤§ä¾¿', unlocked: false },
            { id: 'legendary', name: 'æŒ–~ é‡‘è‰²å‚³èªª', emoji: 'ğŸ‘‘', description: 'ç²å¾—ä¸€æ¬¡å‚³èªªå¤§ä¾¿', unlocked: false },
            { id: 'collector', name: 'å¤§ä¾¿æ”¶è—å®¶', emoji: 'ğŸ†', description: 'æ”¶é›†æ‰€æœ‰ç¨®é¡çš„å¤§ä¾¿', unlocked: false }
        ];

        let collectedPoops = [];

        function getRandomPoop() {
            if (poopTypes.length === 0) {
                return null; // æ‰€æœ‰å¤§ä¾¿é¡å‹éƒ½å·²ç¶“å‡ºç¾é
            }

            const totalChance = poopTypes.reduce((sum, poop) => sum + poop.chance, 0);
            const rand = Math.random() * totalChance;
            let cumulativeChance = 0;

            for (let i = 0; i < poopTypes.length; i++) {
                cumulativeChance += poopTypes[i].chance;
                if (rand <= cumulativeChance) {
                    const selectedPoop = poopTypes[i];
                    poopTypes.splice(i, 1); // å¾åˆ—è¡¨ä¸­ç§»é™¤å·²å‡ºç¾çš„å¤§ä¾¿é¡å‹
                    collectedPoops.push(selectedPoop);
                    return selectedPoop;
                }
            }

            return poopTypes[0]; // é è¨­è¿”å›ç¬¬ä¸€å€‹é¡å‹ï¼ˆç†è«–ä¸Šä¸æ‡‰è©²åˆ°é”é€™è£¡ï¼‰
        }

        function getRandomImage(poop) {
            return poop.images[Math.floor(Math.random() * poop.images.length)];
        }

        function unlockAchievement(rarity) {
            const achievement = achievements.find(a => a.id === rarity);
            if (achievement && !achievement.unlocked) {
                achievement.unlocked = true;
                updateAchievements();
                alert(`æ­å–œï¼ä½ è§£é–äº†æˆå°±ï¼š${achievement.emoji} ${achievement.name}`);
                
                // å¦‚æœæ˜¯å‚³èªªç´šåˆ¥çš„æˆå°±ï¼Œæ’­æ”¾éŸ³æ•ˆ
                if (rarity === 'legendary') {
                    const audio = document.getElementById('legendary-sound');
                    audio.play().catch(e => console.log("éŸ³é »æ’­æ”¾å¤±æ•—:", e));
                }
            }

            // æª¢æŸ¥æ˜¯å¦æ”¶é›†äº†æ‰€æœ‰å¤§ä¾¿é¡å‹
            if (collectedPoops.length === 7) {
                const collectorAchievement = achievements.find(a => a.id === 'collector');
                if (!collectorAchievement.unlocked) {
                    collectorAchievement.unlocked = true;
                    updateAchievements();
                    alert(`æ­å–œï¼ä½ è§£é–äº†æˆå°±ï¼š${collectorAchievement.emoji} ${collectorAchievement.name}`);
                }
            }
        }

        function updateAchievements() {
            const achievementsDiv = document.getElementById('achievements');
            achievementsDiv.innerHTML = achievements.map(a => `
                <div class="achievement ${a.unlocked ? 'unlocked' : ''}">
                    <span class="emoji">${a.emoji}</span> <strong>${a.name}</strong>: ${a.description}
                    ${a.unlocked ? 'âœ…' : 'ğŸ”’'}
                </div>
            `).join('');
        }

        function startPooping() {
            const poop = document.getElementById('poop');
            const result = document.getElementById('result');
            const startBtn = document.getElementById('start-btn');

            startBtn.disabled = true;
            result.textContent = 'æ­£åœ¨åŠªåŠ›ä¸­... ğŸ’ª';
            poop.style.bottom = '120px';

            setTimeout(() => {
                const randomPoop = getRandomPoop();
                if (randomPoop) {
                    const randomComment = comments[Math.floor(Math.random() * comments.length)];
                    const randomImage = getRandomImage(randomPoop);
                    poop.src = randomImage;
                    result.innerHTML = `
                        <strong>å¤§ä¾¿é¡å‹ï¼š</strong>${randomPoop.name}<br>
                        <strong>ç¨€æœ‰åº¦ï¼š</strong><span class="rarity-${randomPoop.rarity}">${rarityEmoji[randomPoop.rarity]} ${rarityText[randomPoop.rarity]}</span><br>
                        <strong>è©•åƒ¹ï¼š</strong>${randomComment}
                    `;
                    unlockAchievement(randomPoop.rarity);
                } else {
                    result.innerHTML = `<strong>æ­å–œï¼</strong>ä½ å·²ç¶“æ”¶é›†åˆ°äº†æ‰€æœ‰ç¨®é¡çš„å¤§ä¾¿ï¼ğŸ‰`;
                    poop.src = 'å¤§ä¾¿.png'; // ä½¿ç”¨é è¨­åœ–ç‰‡
                }
                startBtn.disabled = false;
            }, 5000);

            setTimeout(() => {
                poop.style.bottom = '-80px';
            }, 6000);
        }

        // åˆå§‹åŒ–æˆå°±åˆ—è¡¨
        updateAchievements();
    </script>
</body>
</html>
